# session로그인방식과 token로그인 방식에 대해

웹 애플리케이션을 개발할 때 하는 고민 중 하나는 바로 **"로그인 기능을 어떻게 구현할 것인가?"** 입니다.  
HTTP 프로토콜은 **Stateless(무상태)** 라는 특성을 가지고 있어, 페이지를 이동할 때마다 사용자가 누구인지 서버는 알 수 없습니다. 따라서 우리는 사용자의 상태를 유지하기 위한 기술이 필요합니다.

대표적인 두 가지 방식인 **세션(Session) 기반 인증**과 **토큰(Token) 기반 인증**의 동작 원리와 장단점을 정리해보겠습니다.

---

## 1\. 세션 기반 인증 (Session-based Authentication)

전통적으로 많이 사용되어 온 방식입니다. 핵심은 **"사용자의 정보를 서버가 관리한다"** 는 점입니다.

### 동작 과정

1.  **로그인:** 사용자가 ID/PW를 입력하여 로그인을 요청합니다.
2.  **세션 생성:** 정보를 확인한 서버는 서버 메모리(또는 DB/Redis)에 **세션 ID**를 생성하고 사용자 정보를 저장합니다.
3.  **쿠키 발급:** 서버는 클라이언트에게 **세션 ID**를 담은 **쿠키(Cookie)** 를 응답으로 보냅니다.
4.  **요청:** 클라이언트는 이후 요청을 보낼 때마다 쿠키에 저장된 세션 ID를 함께 실어 보냅니다.
5.  **검증:** 서버는 쿠키의 세션 ID를 보고 서버에 저장된 정보를 찾아 유저를 식별합니다.

### 장점

-   **보안성:** 사용자 정보가 서버에만 있고, 클라이언트는 의미 없는 세션 ID만 가지고 있어 상대적으로 안전합니다.
-   **제어 용이:** 서버에서 세션을 강제로 만료시킬 수 있습니다. (예: 인스타그램의 '다른 기기에서 로그아웃' 기능)

### 단점

-   **서버 부하:** 접속자가 많아지면 서버 메모리에 부하가 걸립니다.
-   **확장성(Scalability) 문제:** 서버가 여러 대(L4 스위칭 등)일 경우, 세션 불일치 문제가 발생합니다. (이를 해결하기 위해 Sticky Session이나 Redis 같은 별도 세션 저장소가 필요함)
-   **멀티 디바이스:** 모바일 앱 등 웹 브라우저가 아닌 환경에서는 쿠키 처리가 번거로울 수 있습니다.

---

## 2\. 토큰 기반 인증 (Token-based Authentication / JWT)

최근 모바일 앱과 SPA(Single Page Application), MSA(Micro Service Architecture) 환경에서 표준처럼 사용되는 방식입니다. 핵심은 **"인증 정보를 클라이언트가 가지고 있다"** 는 점입니다. 주로 **JWT(Json Web Token)** 가 사용됩니다.

### 동작 과정

1.  **로그인:** 사용자가 ID/PW를 입력하여 로그인을 요청합니다.
2.  **토큰 발급:** 서버는 사용자 인증 후, 사용자 정보를 암호화(Signing)하여 **토큰(Access Token)** 을 생성하고 클라이언트에게 전달합니다. (서버는 별도로 정보를 저장하지 않습니다!)
3.  **저장:** 클라이언트는 이 토큰을 로컬 스토리지나 쿠키에 저장합니다.
4.  **요청:** 클라이언트는 요청 시 HTTP 헤더(`Authorization`)에 토큰을 담아 보냅니다.
5.  **검증:** 서버는 토큰의 서명(Signature)을 복호화하여 위변조 여부와 유효기간을 확인하고 인가(Authorization)를 처리합니다.

### 장점

-   **무상태(Stateless) & 확장성:** 서버가 유저 상태를 저장하지 않으므로 서버를 마음껏 늘려도 상관없습니다.
-   **플랫폼 독립적:** 쿠키를 쓰지 않아도 되므로 모바일 앱, 다른 도메인의 웹 등 다양한 클라이언트에서 사용하기 좋습니다.
-   **성능:** 별도의 세션 DB 조회가 필요 없어 인증 속도가 빠릅니다.

### 단점

-   **토큰 탈취 위험:** 토큰 자체에 정보가 담겨 있으므로, 탈취당하면 해커가 유저 행세를 할 수 있습니다. (그래서 유효기간을 짧게 잡습니다.)
-   **강제 만료 불가:** 이미 발급된 토큰은 유효기간이 끝날 때까지 서버에서 강제로 정지시키기 어렵습니다. (이를 보완하기 위해 Refresh Token 전략을 사용합니다.)
-   **데이터 크기:** 세션 ID보다 토큰 데이터 길이가 길어 네트워크 트래픽이 조금 더 발생합니다.

---

## 3\. 한눈에 비교하기

| 구분 | 세션(Session) | 토큰(Token / JWT) |
| :-- | :-- | :-- |
| **저장 위치** | 서버 (메모리, DB) | 클라이언트 (로컬 스토리지, 쿠키) |
| **보안** | 비교적 안전 (서버 통제 가능) | 탈취 시 위험 (Refresh Token 필수) |
| **서버 부하** | 높음 (사용자 수만큼 메모리 점유) | 낮음 (단순 암호화 연산만 수행) |
| **확장성** | 나쁨 (서버 증설 시 세션 공유 처리 필요) | 좋음 (Stateless) |
| **적합한 환경** | 사용자가 적은 내부 시스템, 보안이 매우 중요한 금융권 | 대규모 트래픽 서비스, 앱/웹 동시 지원, MSA 환경 |

---

## 4\. 결론: 무엇을 선택해야 할까?

**"정답은 없습니다. 상황에 맞춰 선택해야 합니다."**

-   단일 서버에서 작동하고, 사용자 수가 예측 가능한 소규모 프로젝트라면 구현이 쉽고 보안이 강력한 **세션 방식**이 좋습니다.
-   향후 서버 확장이 필요하거나, 안드로이드/iOS 앱과 웹을 동시에 운영해야 하거나, 프론트엔드와 백엔드가 완전히 분리된 프로젝트라면 **토큰(JWT) 방식**이 훨씬 유리합니다.

최근의 트렌드는 확장성과 유연성 때문에 **JWT를 이용한 토큰 방식**으로 많이 기울고 있습니다. 하지만 Refresh Token을 이용한 보안 전략까지 꼼꼼하게 구현해야 안전한 서비스를 만들 수 있다는 점을 명심해야 합니다.