# ğŸ“… 2025-12-10 (ìˆ˜) ë°ì¼ë¦¬ íšŒê³ ë¡
**ğŸ·ï¸ Tags:**Â #Spring #JPA #ORM #Backend #Java


---

## ğŸ“š í•™ìŠµ ë‚´ìš©
> ì˜¤ëŠ˜ ê³µë¶€í•˜ë©´ì„œ ìƒˆë¡­ê²Œ ë°°ìš´ ë‚´ìš©ì´ë‚˜ ì •ë¦¬í•œ ê°œë…

### 1. SQL ì¤‘ì‹¬ ê°œë°œì˜ í•œê³„ì™€ JPAì˜ í•„ìš”ì„±
- **SQL ì¤‘ì‹¬ ê°œë°œì˜ ë¬¸ì œì **:
    - ë¬´í•œ ë°˜ë³µë˜ëŠ” CRUD ì¿¼ë¦¬ ì‘ì„± (`INSERT`, `UPDATE`, `SELECT`...).
    - ê°ì²´ ì„¤ê³„ë³´ë‹¤ í…Œì´ë¸” ì„¤ê³„ê°€ ìš°ì„ ì‹œë˜ëŠ” ì£¼ê°ì „ë„ í˜„ìƒ.
    - í•„ë“œ í•˜ë‚˜ ì¶”ê°€ ì‹œ ê´€ë ¨ëœ ëª¨ë“  SQLê³¼ DTOë¥¼ ìˆ˜ì •í•´ì•¼ í•¨.
- **ê°ì²´ì™€ RDBì˜ íŒ¨ëŸ¬ë‹¤ì„ ë¶ˆì¼ì¹˜ 4ê°€ì§€**:
    1.  **ìƒì†**: ê°ì²´ëŠ” ìƒì†ì´ ìˆì§€ë§Œ, RDBëŠ” ìƒì†ì´ ì—†ë‹¤. (ìŠˆí¼íƒ€ì…-ì„œë¸Œíƒ€ì… ê´€ê³„ë¡œ ìœ ì‚¬ êµ¬í˜„ë§Œ ê°€ëŠ¥)
    2.  **ì—°ê´€ê´€ê³„**: ê°ì²´ëŠ” **ì°¸ì¡°(`member.getTeam()`)** ë¥¼ ì‚¬ìš©í•˜ì§€ë§Œ, RDBëŠ” **ì™¸ë˜ í‚¤(`JOIN`)** ë¥¼ ì‚¬ìš©í•œë‹¤.
    3.  **ë°ì´í„° íƒ€ì…**: ê°ì²´ëŠ” ììœ ë¡œìš´ íƒ€ì…(ì»¬ë ‰ì…˜ ë“±)ì„ ì“°ì§€ë§Œ, RDBëŠ” ê¸°ë³¸ íƒ€ì…ë§Œ ì§€ì›í•œë‹¤.
    4.  **ì‹ë³„ ë°©ë²•**: ê°ì²´ëŠ” ì°¸ì¡°ê°’(ì£¼ì†Œ)ìœ¼ë¡œ ì‹ë³„í•˜ì§€ë§Œ, RDBëŠ” PKë¡œ ì‹ë³„í•œë‹¤.

### 2. JPA (Java Persistence API)
- **ê°œë…**: ìë°” ì§„ì˜ì˜ ORM(Object-Relational Mapping) ê¸°ìˆ  í‘œì¤€ ì¸í„°í˜ì´ìŠ¤. (êµ¬í˜„ì²´: Hibernate ë“±)
- **ì‚¬ìš© ì´ìœ  (ì¥ì )**:
    - **ìƒì‚°ì„±**: `em.persist(member)`, `em.find(memberId)` ë“± ë©”ì„œë“œ í•˜ë‚˜ë¡œ SQL ì‹¤í–‰.
    - **ìœ ì§€ë³´ìˆ˜ì„±**: ì—”í‹°í‹° í•„ë“œë§Œ ìˆ˜ì •í•˜ë©´ ì¿¼ë¦¬ëŠ” JPAê°€ ì•Œì•„ì„œ ì²˜ë¦¬.
    - **íŒ¨ëŸ¬ë‹¤ì„ ë¶ˆì¼ì¹˜ í•´ê²°**: ìƒì†, ì—°ê´€ê´€ê³„, ê°ì²´ ê·¸ë˜í”„ íƒìƒ‰ ë¬¸ì œ í•´ê²°.
    - **ì„±ëŠ¥ ìµœì í™”**: 1ì°¨ ìºì‹œ, ì“°ê¸° ì§€ì—°, ì§€ì—° ë¡œë”©(Lazy Loading) ì§€ì›.

### 3. JPA í…Œì´ë¸” ì„¤ê³„ ë° ë§¤í•‘ (ì‹¤ìŠµ ì ìš©)
- **ì—”í‹°í‹° ë§¤í•‘**: `@Entity` (í•„ìˆ˜), `@Table`(ë§¤í•‘í•  í…Œì´ë¸”ëª… ì§€ì •).
- **PK ë§¤í•‘**: `@Id`, `@GeneratedValue(strategy = GenerationType.IDENTITY)` (MySQL Auto Increment).
- **ì—°ê´€ê´€ê³„ ë§¤í•‘**:
    - **@ManyToOne**: ë‹¤ëŒ€ì¼ ê´€ê³„ (ê²Œì‹œê¸€ `N` : íšŒì› `1`). **ê°€ì¥ ì¤‘ìš”!**
    - **@JoinColumn**: ì™¸ë˜ í‚¤(FK) ë§¤í•‘ (`name = "member_email"`).
    - **@OneToMany**: ì¼ëŒ€ë‹¤ ê´€ê³„ (íšŒì› `1` : ê²Œì‹œê¸€ `N`). `mappedBy`ë¡œ ì£¼ì¸ì´ ì•„ë‹˜ì„ ëª…ì‹œ.

---

## ğŸ§‘ğŸ»â€ğŸ’» ì½”ë“œ ì˜ˆì œ
> ìˆ˜ì—… ë‚´ìš©ê³¼ ì‹¤ìŠµ í”„ë¡œì íŠ¸(`board`)ì— ì ìš©í•œ í•µì‹¬ ì½”ë“œ

**1. Member Entity (íšŒì›)**
*`@OneToMany`ë¥¼ ì‚¬ìš©í•˜ì—¬ íšŒì›ì´ ì‘ì„±í•œ ê²Œì‹œê¸€ ëª©ë¡ì„ ì¡°íšŒí•  ìˆ˜ ìˆë„ë¡ ì–‘ë°©í–¥ ë§¤í•‘.*
```java
@Entity
@Getter 
@NoArgsConstructor(access = AccessLevel.PROTECTED) // JPA ìŠ¤í™ìƒ ê¸°ë³¸ ìƒì„±ì í•„ìˆ˜
@AllArgsConstructor 
@Builder
@Table(name = "MEMBER")
public class Member {

    @Id // ì§ì ‘ í• ë‹¹ ë°©ì‹ (ì´ë©”ì¼)
    @Column(length = 255)
    private String email;

    @Column(nullable = false)
    private String name;
    
    // ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì´ ì•„ë‹˜ (Boardì˜ member í•„ë“œì— ë§¤í•‘ë¨)
    // íšŒì› ì‚­ì œ ì‹œ ì‘ì„±í•œ ê²Œì‹œê¸€ë„ í•¨ê»˜ ì‚­ì œ (CascadeType.ALL)
    @OneToMany(mappedBy = "member", cascade = CascadeType.ALL)
    private List<Board> boards = new ArrayList<>();
}
```

**2. Board Entity (ê²Œì‹œê¸€)**
*`@ManyToOne`ìœ¼ë¡œ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì„ ì„¤ì •í•˜ê³  `LAZY` ë¡œë”©ìœ¼ë¡œ ìµœì í™”.*
```java
@Entity
@Getter 
@NoArgsConstructor(access = AccessLevel.PROTECTED)
@AllArgsConstructor 
@Builder
@Table(name = "BOARD")
public class Board {

    @Id 
    @GeneratedValue(strategy = GenerationType.IDENTITY) // IDENTITY ì „ëµ
    @Column(name = "board_id")
    private Long boardId;

    @Column(nullable = false)
    private String title;

    @Column(nullable = false, columnDefinition = "TEXT")
    private String contents;

    // N:1 ê´€ê³„ (ê²Œì‹œê¸€ N : íšŒì› 1) - ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸
    // ì§€ì—° ë¡œë”©(LAZY) í•„ìˆ˜: ì‹¤ì œ ê°ì²´ë¥¼ ì¡°íšŒí•  ë•Œ ì¿¼ë¦¬ ì‹¤í–‰
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "member_email", nullable = false) // FK ì»¬ëŸ¼ëª…
    private Member member; 
}
```

---

## ğŸ’£ Trouble Shooting
> ë°œìƒí•œ ë¬¸ì œì™€ í•´ê²°ì±…

- **ë¬¸ì œ**: `Board`ë¥¼ ì¡°íšŒí•  ë•Œ ì—°ê´€ëœ `Member`ê¹Œì§€ ì¦‰ì‹œ ì¡°íšŒë˜ì–´ ë¶ˆí•„ìš”í•œ ì¡°ì¸ ì¿¼ë¦¬ê°€ ë°œìƒí•¨.
- **ì›ì¸**: `@ManyToOne`ì˜ ê¸°ë³¸ Fetch ì „ëµì´ `EAGER`(ì¦‰ì‹œ ë¡œë”©)ì´ê¸° ë•Œë¬¸ì—, ê²Œì‹œê¸€ 1ê°œë¥¼ ê°€ì ¸ì˜¬ ë•Œ íšŒì› ì •ë³´ë„ ë¬´ì¡°ê±´ í•¨ê»˜ ê°€ì ¸ì˜´.
- **í•´ê²°**: `fetch = FetchType.LAZY` (ì§€ì—° ë¡œë”©) ì˜µì…˜ì„ ì¶”ê°€í•˜ì—¬, `board.getMember()`ë¥¼ ì‹¤ì œë¡œ í˜¸ì¶œí•˜ëŠ” ì‹œì ì— ì¿¼ë¦¬ê°€ ë‚˜ê°€ë„ë¡ ë³€ê²½í•¨.

---
## ğŸŒŸ ì˜í•œ ì 
> ì˜¤ëŠ˜ í•˜ë£¨ ìŠ¤ìŠ¤ë¡œ ì¹­ì°¬í•  ë§Œí•œ ì 

- ê°•ì˜ì—ì„œ ë°°ìš´ **ê°ì²´ì™€ RDBì˜ íŒ¨ëŸ¬ë‹¤ì„ ì°¨ì´**ë¥¼ ì´í•´í•˜ê³ , ì´ë¥¼ ì½”ë“œë¡œ ì–´ë–»ê²Œ í•´ê²°í•˜ëŠ”ì§€(ì—°ê´€ê´€ê³„ ë§¤í•‘) ì‹¤ìŠµì— ì˜ ì ìš©í–ˆë‹¤.
- `Board`ì™€ `Member` ê°„ì˜ **1:N, N:1 ì–‘ë°©í–¥ ê´€ê³„**ë¥¼ ì„¤ì •í•˜ê³  `mappedBy`ì˜ ì—­í• ì„ ì •í™•íˆ ì´í•´í–ˆë‹¤.

---

## âš ï¸ ì•„ì‰¬ìš´ ì 
> ë¶€ì¡±í–ˆë˜ ì 

- ì•„ì§ ì„œë¹„ìŠ¤(`BoardServiceImpl`) ê³„ì¸µì—ì„œëŠ” JPA `Repository`ê°€ ì•„ë‹Œ MyBatis `Mapper`ë¥¼ ì‚¬ìš©í•˜ê³  ìˆì–´ ì™„ì „í•œ JPA ì „í™˜ì´ ì´ë£¨ì–´ì§€ì§€ ì•Šì•˜ë‹¤.
- `Cascade` ì˜µì…˜ì˜ ë™ì‘ ì›ë¦¬ë¥¼ ë¨¸ë¦¬ë¡œëŠ” ì´í•´í–ˆì§€ë§Œ, ì‹¤ì œ ì‚­ì œ í…ŒìŠ¤íŠ¸ê¹Œì§€ëŠ” ê¼¼ê¼¼í•˜ê²Œ í•´ë³´ì§€ ëª»í–ˆë‹¤.

---

## ğŸ¤” ë‚´ì¼ ì‹œë„í•  ì 
> ë‚´ì¼ ì‹œë„í•˜ê³  ì‹¶ì€ ë¶€ë¶„

- **Spring Data JPA ì ìš©**: `JpaRepository`ë¥¼ ìƒì†ë°›ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì„±í•˜ì—¬ `findAll`, `save` ë“± ê¸°ë³¸ CRUD ë©”ì„œë“œë¥¼ MyBatis ì—†ì´ êµ¬í˜„í•˜ê¸°.
- **ì˜ì†ì„± ì „ì´ í…ŒìŠ¤íŠ¸**: `Member`ë¥¼ ì‚­ì œí–ˆì„ ë•Œ `Board` í…Œì´ë¸”ì˜ ë°ì´í„°ê°€ ì‹¤ì œë¡œ í•¨ê»˜ ì‚­ì œë˜ëŠ”ì§€ í™•ì¸í•˜ê¸°.

---

## ğŸ’¬ í•œì¤„í‰
> ì˜¤ëŠ˜ í•˜ë£¨ë¥¼ í•œ ë¬¸ì¥ìœ¼ë¡œ ì •ë¦¬

> "SQLì˜ ë…¸ì˜ˆì—ì„œ í•´ë°©! ê°ì²´ì§€í–¥ì ì¸ ì„¤ê³„ê°€ DB í…Œì´ë¸”ë¡œ ìë™ ë§¤í•‘ë˜ëŠ” JPAì˜ ë§¤ë ¥ì„ ëŠë‚Œ."