# π“… 2025-12-23 (ν™”) λ°μΌλ¦¬ νκ³ λ΅
**π·οΈ Tags:** #Spring #JPA #SpringDataJPA #QueryMethod #Paging #12μ›”

---

## π“ ν•™μµ λ‚΄μ©
> μ¤λ κ³µλ¶€ν•λ©΄μ„ μƒλ΅­κ² λ°°μ΄ λ‚΄μ©μ΄λ‚ μ •λ¦¬ν• κ°λ…

- **Spring Data JPA μ†κ° λ° μ¥μ **
    - κΈ°μ΅΄μ `EntityManager`λ¥Ό μ§μ ‘ μ‚¬μ©ν•μ—¬ `persist`, `find` λ“±μ„ νΈμ¶ν•λ λ°λ³µμ μ΄κ³  μ§€λ£¨ν• CRUD μ½”λ“λ¥Ό νκΈ°μ μΌλ΅ μ¤„μ—¬μ¤€λ‹¤.
    - `JpaRepository<Entity, ID>` μΈν„°νμ΄μ¤λ¥Ό μƒμ†λ°›κΈ°λ§ ν•λ©΄ κΈ°λ³Έμ μΈ CRUD λ©”μ„λ“κ°€ μλ™μΌλ΅ κµ¬ν„λλ‹¤.

- **μΏΌλ¦¬ λ©”μ†λ“ (Query Method)**
    - λ©”μ„λ“ μ΄λ¦„λ§μΌλ΅ μΏΌλ¦¬λ¥Ό μƒμ„±ν•λ” κ°•λ ¥ν• κΈ°λ¥.
    - μ: `findByUsername(String username)` -> `SELECT ... WHERE username = ?`

- **@Query μ–΄λ…Έν…μ΄μ…**
    - λ©”μ„λ“ μ΄λ¦„μΌλ΅ μΏΌλ¦¬λ¥Ό ν‘ν„ν•κΈ° νλ“¤κ±°λ‚ λ„λ¬΄ κΈΈμ–΄μ§ λ•, JPQLμ„ μ§μ ‘ μ‘μ„±ν•μ—¬ λ°”μΈλ”©ν•  μ μλ‹¤.
    - μ¤νƒ€ λ°μƒ μ‹ μ»΄νμΌ μ‹μ μ΄ μ•„λ‹ λ΅λ”© μ‹μ μ— μ—λ¬λ¥Ό μ΅μ•„μ¤€λ‹¤(Named Queryμ μ¥μ ).
    - νλΌλ―Έν„° λ°”μΈλ”© μ‹ `@Param("name")`μ„ λ…μ‹μ μΌλ΅ μ‚¬μ©ν•΄μ•Ό ν•λ‹¤.

- **νμ΄μ§•κ³Ό μ •λ ¬ (Paging & Sorting)**
    - `Pageable` μΈν„°νμ΄μ¤λ¥Ό νλΌλ―Έν„°λ΅ λ„κ²¨μ„ μ†μ‰½κ² νμ΄μ§• μ²λ¦¬λ¥Ό ν•  μ μλ‹¤.
    - λ°ν™ νƒ€μ…μ„ `Page<T>`λ΅ λ°›μΌλ©΄ λ°μ΄ν„°λΏλ§ μ•„λ‹λΌ μ „μ²΄ νμ΄μ§€ μ, μ „μ²΄ λ°μ΄ν„° κ°μ(count μΏΌλ¦¬ ν¬ν•¨) λ“±μ λ©”νƒ€λ°μ΄ν„°λ„ ν•¨κ» λ°›μ„ μ μλ‹¤.

- **λ„¤μ΄ν‹°λΈ μΏΌλ¦¬ (Native Query)**
    - JPQLλ΅ ν•΄κ²°μ΄ μ• λλ” λ³µμ΅ν• μΏΌλ¦¬λ‚ DB μΆ…μ†μ μΈ κΈ°λ¥ μ‚¬μ© μ‹ `nativeQuery = true` μµμ…μ„ μ£Όμ–΄ SQLμ„ μ§μ ‘ μ‘μ„±ν•  μ μλ‹¤.
    - DTO λ§¤ν•‘μ΄ κΉλ‹¤λ΅μ΄λ°, `Interface Projection`μ„ ν™μ©ν•μ—¬ ν•΄κ²°ν•  μ μλ‹¤.

---

## π§‘π»β€π’» μ½”λ“ μμ 
> μμ—… μ‹κ°„μ— μ‘μ„±ν• ν•µμ‹¬ μ½”λ“λ‚ μ§μ ‘ λ³€ν•ν• μ½”λ“

```java
// 1. κΈ°λ³Έ Repository μ •μ λ° μΏΌλ¦¬ λ©”μ†λ“
public interface MemberRepository extends JpaRepository<Member, Long> {
    
    // μ΄λ¦„μΌλ΅ μ΅°ν (μΏΌλ¦¬ λ©”μ†λ“)
    List<Member> findByUsername(String username);
    
    // λ‚μ΄κ°€ νΉμ • κ°’ μ΄μƒμΈ νμ› μ΅°ν
    List<Member> findByAgeGreaterThan(int age);
}
```

```java
// 2. @Queryλ¥Ό μ΄μ©ν• JPQL μ •μ λ° νμ΄μ§•
public interface BoardRepository extends JpaRepository<Board, Long> {

    // λ³µμ΅ν• μ΅°κ±΄μ€ JPQLλ΅ μ§μ ‘ μ‘μ„± (@Param ν•„μ)
    @Query("SELECT b FROM Board b WHERE b.title LIKE %:title% AND b.status = 'Y'")
    Page<Board> findActiveBoards(@Param("title") String title, Pageable pageable);
}
```

```java
// 3. μ„λΉ„μ¤ κ³„μΈµμ—μ„ νμ΄μ§• μ‚¬μ© μμ‹
public void getBoardList() {
    // 0νμ΄μ§€λ¶€ν„° 10κ°μ”©, boardNo κΈ°μ¤€μΌλ΅ λ‚΄λ¦Όμ°¨μ μ •λ ¬
    PageRequest pageRequest = PageRequest.of(0, 10, Sort.by("boardNo").descending());
    
    Page<Board> result = boardRepository.findActiveBoards("κ³µμ§€", pageRequest);
    
    System.out.println("μ „μ²΄ νμ΄μ§€ μ: " + result.getTotalPages());
    System.out.println("μ΅°νλ λ°μ΄ν„°: " + result.getContent());
}
```

---

## π’£ Trouble Shooting
> λ°μƒν• λ¬Έμ μ™€ ν•΄κ²°μ±…

- **λ¬Έμ **: `@Query`λ¥Ό μ‚¬μ©ν•μ—¬ νλΌλ―Έν„°λ¥Ό λ°”μΈλ”©ν•  λ•, μ΄λ¦„ κΈ°λ° λ°”μΈλ”©(`:name`)μ„ μ‚¬μ©ν–λ”λ° μ‹¤ν–‰ μ‹ νλΌλ―Έν„°λ¥Ό μ°Ύμ„ μ μ—†λ‹¤λ” μ—λ¬κ°€ λ°μƒν•¨.
- **ν•΄κ²°**: Spring Data JPAμ—μ„ `@Query` μ‚¬μ© μ‹ νλΌλ―Έν„° μ•μ—λ” λ°λ“μ‹ `@Param("name")` μ–΄λ…Έν…μ΄μ…μ„ λ¶™μ—¬μ¤μ•Ό JPQLμ νλΌλ―Έν„° λ³€μμ™€ λ§¤μΉ­λλ‹¤λ” μ μ„ ν™•μΈν•κ³  μμ •ν•¨.

---
## π μν• μ 
> μ¤λ ν•λ£¨ μ¤μ¤λ΅ μΉ­μ°¬ν•  λ§ν• μ 

- κΈ°μ΅΄μ— `EntityManager`λ΅ κΈΈκ² μ‘μ„±ν•λ DAO μ½”λ“λ¥Ό `Repository` μΈν„°νμ΄μ¤ ν•λ‚λ΅ λ€μ²΄ν•λ©΄μ„ μ½”λ“ μƒμ‚°μ„±μ΄ μ–Όλ§λ‚ λ†’μ•„μ§€λ”μ§€ μ§μ ‘ μ²΄κ°ν–λ‹¤.
- νμ΄μ§• μ²λ¦¬λ¥Ό μ„ν•΄ `limit`, `offset`μ„ μ§μ ‘ κ³„μ‚°ν•λ λ²κ±°λ΅μ›€μ—μ„ λ²—μ–΄λ‚ `Pageable` κ°μ²΄ ν•λ‚λ΅ ν•΄κ²°ν•λ” λ°©λ²•μ„ μµν”λ‹¤.

---

## β οΈ μ•„μ‰¬μ΄ μ 
> λ¶€μ΅±ν–λ μ 

- λ„¤μ΄ν‹°λΈ μΏΌλ¦¬(`nativeQuery = true`)λ¥Ό μ‚¬μ©ν•  λ• κ²°κ³Ό λ§¤ν•‘(DTO λ³€ν™)μ΄ μƒκ°λ³΄λ‹¤ κΉλ‹¤λ΅μ› λ‹¤. `Interface Projection` λ°©μ‹μ΄ κ¶μ¥λμ§€ μ•λ”λ‹¤κ³  ν•λ”λ°, QueryDSL κ°™μ€ λ€μ•μ„ μ•„μ§ λ°°μ°μ§€ λ»ν•΄ μ•„μ‰½λ‹¤.

---

## π¤” λ‚΄μΌ μ‹λ„ν•  μ 
> λ‚΄μΌ μ‹λ„ν•κ³  μ‹¶μ€ λ¶€λ¶„

- μ‹¤λ¬΄μ—μ„ λ™μ  μΏΌλ¦¬λ¥Ό μ²λ¦¬ν•  λ• `Specification`μ΄λ‚ `QueryDSL`μ„ λ§μ΄ μ“΄λ‹¤κ³  λ“¤μ—λ”λ°, Spring Data JPAλ§μΌλ΅ λ™μ  μΏΌλ¦¬λ¥Ό κΉ”λ”ν•κ² μ²λ¦¬ν•λ” ν•κ³„κ°€ μ–΄λ””κΉμ§€μΈμ§€ ν…μ¤νΈν•΄λ³΄κ³  μ‹¶λ‹¤.

---

## π’¬ ν•μ¤„ν‰
> μ¤λ ν•λ£¨λ¥Ό ν• λ¬Έμ¥μΌλ΅ μ •λ¦¬

> κµ¬ν„ ν΄λμ¤ μ—†μ΄ μΈν„°νμ΄μ¤λ§μΌλ΅ DBκ°€ μ΅°μ‘λλ‹¤.