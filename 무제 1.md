- 오늘 전부 병합 해볼 예정
- application.yaml 시크릿 사용
- 정훈님만 css가 적용이 안 됨(이슈)
- 멤버 미션 테이블 추가
- 관리자 페이지 할당
	- 정훈: 신청관리
	- 준언: 팀원관리, 관리자 마이페이지
	- 원석: 대시보드
	- 치호: 직원 대시보드
	- 승원: 포인트몰 


---

- 오늘은 백승원 메인 머지하고 테스트를 좀 해보고
- 고칠 거 고치고
- 관리자 시작하는 걸로
- 더미데이터 공유

---

- 승원 포인트 페이지랑 씨름 중(로직 바꾸고 있다고 함)(axios import 때문에)
- 준언 직원 마이페이지 스트레스 로직 수정/관리자 마이페이지 구현, 팀원관리 구현
- 원석 관리자 대시보드 구현 예정
- 치호 직원 대시보드 DB에 넣는 것들 로직 구현 중
- 정훈 직원 관리 근태 같은 날 신청이 중복으로 들어가짐 수정 예정
- 코드리뷰 월요일
- 치호 관리자 상세분석 개발
- 다음주 수요일까지 개발 완료
- 목요일 테스트 예정
- ----

- 코드리뷰 월, 수
	- 오늘은 오후에 데일리 Q&A 끝나고
- 인증 `principal`로 변경
	- 일단 구현하고 나중에
- ---

- 끝난 페이지
	- 포인트몰(미션완료 1분 수정해야함)
	- 직원 대시보드
	- 상담신청
	- 부서정보
	- 근태 관리
	- 마이페이지(관리자, 직원)
- 남은 페이지
	- 상세분석
	- 관리자 대시보드
	- 신청관리
	- 팀원관리

---

- 회원가입하고 마이페이지 들어갔을 때 조인데이트(입사일)이 null이면 입사일 작성하라고 알림
  레지스터데이트를 회사 가입 수락일로
- 위험 80, 주의 70으로 수정(한달 기준)
- 승원 알림 기능
- 원석 관리자 대시보드
- 준언 직원관리 

---

# 📊 Admin Dashboard Logic Documentation

[AdminMonitoringServiceImpl.java](cci:7://file:///Users/chiho/Code808/Backend/src/main/java/com/code808/calmdesk/domain/monitoring/service/AdminMonitoringServiceImpl.java:0:0-0:0)에 구현된 비즈니스 로직을 바탕으로, **5개의 요약 카드**와 **4개의 분석 그래프** (총 9개 항목)에 대한 산출 공식과 로직을 정리했습니다.

---

## 1. 상단 요약 카드 (Summary Cards)

> **기간 기준:** 현재 월 (예: 2026년 2월 1일 ~ 2월 28일)

### ① 전체 직원 (Total Employees)
*   **로직:** 현재 DB에 등록된 총 회원 수
*   **공식:**
    $$ \text{Total} = \text{COUNT(member)} $$
*   **추세:** 별도 자동화 로직 없음 ('+0' 고정)

### ② 평균 스트레스 (Avg Stress)
*   **로직:** 이번 달 생성된 스트레스 요약(StressSummary) 기록들의 평균값
*   **공식:**
    $$ \text{AvgStress} = \frac{\sum(\text{StressLevel})}{\text{Count(Records)}} $$
*   **추세(Stress Trend):** (이번 달 평균) - (지난 달 평균)
    *   단순 수치 차이 (예: $55\% - 50\% = +5.0\%$)

### ③ 위험군 (High Risk Count)
*   **로직:** 이번 달 평균 스트레스 지수가 **70점 이상**인 직원 수
*   **공식:**
    $$ \text{HighRisk} = \text{COUNT}(\text{Member})\; \text{where}\; \text{AvgStress} \ge 70 $$
*   **추세(Risk Trend):** (이번 달 위험군 수) - (지난 달 위험군 수)
    *   단순 인원 차이 (예: $+2$)

### ④ 평균 쿨다운 (Avg Cooldown)
*   **로직:** 이번 달 전체 쿨다운 발생 횟수를 전체 직원 수로 나눈 값 (인당 평균)
*   **공식:**
    $$ \text{AvgCooldown} = \frac{\text{Total Cooldown Count (This Month)}}{\text{Total Employees}} $$
*   **추세(Cooldown Trend):** 전월 대비 증감률 (%)
    $$ \text{Trend} = \frac{\text{Current} - \text{Prev}}{\text{Prev}} \times 100 $$

### ⑤ 전월 대비 상담 (Consultation Count)
*   **로직:** 이번 달에 생성된 총 상담 신청 건수
*   **공식:**
    $$ \text{Consultation} = \text{COUNT}(\text{Consultation})\; \text{where}\; \text{Date} \in \text{This Month} $$
*   **추세(Consultation Trend):** 전월 대비 증감률 (%)
    $$ \text{Trend} = \frac{\text{Current} - \text{Prev}}{\text{Prev}} \times 100 $$

---

## 2. 하단 분석 그래프 (Charts)

### ⑥ 월별 통합 추이 분석 (Monthly Trend Chart)
*   **데이터:** 최근 6개월간의 월별 데이터 (예: 9월 ~ 2월)
*   **항목별 산출 방식:**
    *   **스트레스:** 해당 월의 평균 스트레스 점수
    *   **상담:** 해당 월의 총 상담 건수
    *   **쿨다운:** 해당 월의 총 쿨다운 횟수

### ⑦ 스트레스 수준 분포 (Distribution Pie Chart)
*   **기준:** 이번 달 직원들의 평균 스트레스 점수에 따른 구간별 인원 수
*   **구간 정의:**
    *   🔴 **위험 (High Risk):** $70 \le \text{Score} \le 100$
    *   🟠 **주의 (Caution):** $40 \le \text{Score} < 70$
    *   🔵 **정상 (Normal):** $0 \le \text{Score} < 40$

### ⑧ 부서별 스트레스 비교 (Dept Comparison Bar Chart)
*   **데이터:** 각 부서([Department](cci:1://file:///Users/chiho/Code808/Backend/src/main/java/com/code808/calmdesk/domain/attendance/repository/StressSummaryRepository.java:24:4-26:171))별 통계
*   **항목:**
    *   **평균(Avg):** 해당 부서 소속 직원들의 이번 달 스트레스 평균
        $$ \frac{\sum(\text{Dept Member Stress})}{\text{Count(Dept Members)}} $$
    *   **고위험군(High Risk):** 해당 부서에서 점수가 70점 이상인 직원 수

### ⑨ 주요 스트레스 요인 분석 (Key Factors Bar Chart)
*   **데이터:** 이번 달 직원들이 체크한 스트레스 요인(`StressFactor`) 집계
*   **로직:** 가장 많이 선택된 상위 4개 요인을 추출하여 비율(%) 계산
*   **공식:**
    $$ \text{Factor Percentage} = \frac{\text{Count of Specific Factor}}{\text{Total Count of All Factors}} \times 100 $$